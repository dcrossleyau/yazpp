<?xml version="1.0"?>
<!-- $Id: voyager.xml,v 1.7 2004-01-07 14:40:41 adam Exp $ -->
<proxy>
  <!-- define default target and name it voyager -->
  <target default="1" name="voyager">
    <!-- all backend addresses as seen from this proxy .. -->
    <url>z3950.loc.gov:7090</url>

    <!-- set session timeout between proxy and backend target -->
    <target-timeout>300</target-timeout>

    <!-- set session timeout between client and proxy.
    Should be lower than target-timeout -->
    <client-timeout>180</client-timeout>

    <!-- if either bandwidth or pdu limit is reached the session is no
    longer kept alive -->
    <keepalive>
      <bandwidth>500000</bandwidth>
      <pdu>500</pdu>
    </keepalive>

    <!-- client limits .. -->
    <limit>
      <bandwidth>200000</bandwidth>
      <pdu>31</pdu>
      <retrieve>50</retrieve>
    </limit>

    <!-- use attributes -->
    <attribute type="1" value="1-11,13-1010,1013-1023,1025-1030"/>
    <attribute type="1" value="*" error="114"/>

    <!-- relation attributes -->
    <attribute type="2" value="1,2,3,4,5,6"/>
    <attribute type="2" value="*" error="117"/>
    
    <!-- position attributes -->
    <attribute type="3" value="1,2,3"/>
    <attribute type="3" value="*" error="119"/>

    <!-- structure attributes -->
    <attribute type="4" value="1,2,3,4,5,6"/>
    <attribute type="4" value="*" error="118"/>

    <!-- truncation attributes -->
    <attribute type="5" value="1,100"/>
    <attribute type="5" value="*" error="120"/>

    <!-- completeness attributes -->
    <attribute type="6" value="1,2,3"/>
    <attribute type="6" value="*" error="122"/>

    <!-- other types -->
    <attribute type="*" value="*" error="113"/>

    <!-- list allowed record syntaxes and possible schemas (if any);
    reject all others at the end -->
    <syntax type="opac"/>
    <syntax type="usmarc"/>
    <syntax type="none"/>
    
    <syntax type="xml" marcxml="1"
      identifier="http://www.loc.gov/marcxml/"
      >
      <title>MARCXML</title>
      <name>marcxml</name>
    </syntax>
    <syntax type="xml" marcxml="1" stylesheet="MARC21slim2DC.xsl"
      identifier="http://www.loc.gov/zing/srw/dcschema/v1.0/"
      >
      <title>Dublin Core</title>
      <name>dc</name>
    </syntax>
    <syntax type="xml" marcxml="1" stylesheet="MARC21slim2MODS.xsl"
      identifier="http://www.loc.gov/mods/v3"
      >
      <title>MODS</title>
      <name>mods</name>
    </syntax>

    <syntax type="*" error="238"/>

    <!-- keep this number of spare sessions for future sessions -->
    <preinit>2</preinit>

    <explain>
      <serverInfo>
	<host>indexdata.dk</host>
	<port>9000</port>
      </serverInfo>

      <databaseInfo>
	<title>LoC gateway</title>
	<description lang="en" primary="true">
	  SRW/SRU/Z39.50 Gateway to Library of Congress' Z39.50 server
	</description>
      </databaseInfo>
      
      <indexInfo>
	<set identifier="http://www.loc.gov/zing/cql/context-sets/cql/v1.1/"
	  name="cql"/>
	<set identifier="http://www.loc.gov/zing/cql/dc-indexes/v1.0/"
	  name="dc"/>
	<set identifier="http://www.loc.gov/zing/cql/context-sets/bath/v1.1/"
	  name="bath"/>
      </indexInfo>

      <index id="4">
	<title>title</title>
	<map><name set="dc">title</name></map>
      </index>
      <index id="21">
	<title>subject</title>
	<map><name set="dc">subject</name></map>
      </index>
      <index id="1003">
	<title>creator</title>
	<map><name set="dc">creator</name></map>
	<map><name set="dc">author</name></map>
      </index>

      <index id="1020">
	<title>editor</title>
	<map><name set="dc">editor</name></map>
      </index>

      <index id="1018">
	<title>publisher</title>
	<map><name set="dc">publisher</name></map>
      </index>

      <index id="62">
	<title>description</title>
	<map><name set="dc">description</name></map>
      </index>

      <index id="30">
	<title>date</title>
	<map><name set="dc">date</name></map>
      </index>

      <index id="30">
	<title>date</title>
	<map><name set="dc">date</name></map>
      </index>

      <index id="1002">
	<title>name</title>
	<map><name set="bath">name</name></map>
      </index>

      <index id="7">
	<title>isbn</title>
	<map><name set="bath">isbn</name></map>
      </index>
      <index id="8">
	<title>issn</title>
	<map><name set="bath">issn</name></map>
      </index>

      <schemaInfo identifier="http://www.loc.gov/marcxml/"
	sort="false" name="marcxml">
	<title>MARCXML</title>
      </schemaInfo>
      
      <schemaInfo identifier="http://www.loc.gov/zing/srw/dcschema/v1.0"
	sort="false" name="dc">
	<title>Dublin Core</title>
      </schemaInfo>

      <schemaInfo identifier="http://www.loc.gov/mods/v3"
	sort="false" name="mods">
	<title>MODS</title>
      </schemaInfo>
      
    </explain>
   <cql2rpn>pqf.properties</cql2rpn>
  </target>


  <!-- maximum number of client sessions. Remember to allow for
     at least max-clients*2+5 sockets. Use 'ulimit -n 1040' on bash -->
  <max-clients>500</max-clients>
  
  <!-- what we log. Allowed tokens: client-apdu, server-apdu,
  client-requests, server-requests -->
  <log>client-requests server-requests</log>
</proxy>
